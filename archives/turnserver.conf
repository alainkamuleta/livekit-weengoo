# --- Ports d’écoute standard TURN ---
listening-port=3478
tls-listening-port=5349

# --- IP publique (remplacer si nécessaire) ---
external-ip=54.36.103.240

# --- Ports UDP utilisés pour les relais ---
min-port=49152
max-port=49200

# --- Mécanismes d'authentification ---
# Active le mode username:password (obligatoire pour fallback manuel)
# lt-cred-mech

# Décommenter si utilisation du HMAC partagé avec LiveKit (voir ci-dessous)
use-auth-secret

# --- Secret partagé pour auth statique (LiveKit TURN REST API) ---
# Remarque : l’un des deux doit être actif :
# static-auth-secret=valeur_du_secret          # <- utilisé dans livekit.yaml (turn.secret)
# OU : lire depuis fichier
# static-auth-secret=FILE:/run/secrets/turn_secret
static-auth-secret=IneRTWyqAx4OtSthS2jc5QFIrE5vIneRTWyqAx4OtSthS2jc7IDz1bVS23cwJthS2jc5QFIrE


# --- Domaine logique pour le challenge nonce ---
realm=turn.weengoo.net

# --- Auth manuelle (fallback) ---
# user=weengoo:b0wbAetbAz743OloXVw6uftPwLwye6eZN

# --- TLS ---
cert=/home/alain/livekit-weengoo/certs/turn.crt
pkey=/home/alain/livekit-weengoo/certs/turn.key

# --- Journalisation ---
fingerprint
# Évite d'inonder stdout si tournant en conteneur
no-stdout-log
# simple-log                      # Optionnel : logs simplifiés
# log-file=/var/log/turnserver.log  # Optionnel : fichier de log

# --- Sécurité et limitations ---
no-loopback-peers
no-multicast-peers
total-quota=100
stale-nonce

# --- Facultatif : si tu ne veux pas autoriser le relai TCP (rare) ---
# no-tcp-relay
